{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Header from'../components/Header';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AgentLists(){const[agents,setAgents]=useState([]);const[selected,setSelected]=useState('');const[items,setItems]=useState([]);const token=localStorage.getItem('token');useEffect(()=>{axios.get('http://localhost:5000/api/agents',{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setAgents(res.data));},[token]);const handleSelect=async e=>{const agentId=e.target.value;setSelected(agentId);if(agentId){const res=await axios.get(\"http://localhost:5000/api/lists/agent/\".concat(agentId),{headers:{Authorization:\"Bearer \".concat(token)}});setItems(res.data);}else{setItems([]);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Agent Lists\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:handleSelect,value:selected,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Agent\"}),agents.map(a=>/*#__PURE__*/_jsx(\"option\",{value:a._id,children:a.name},a._id))]}),/*#__PURE__*/_jsx(\"ul\",{children:items.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.firstName,\" - \",item.phone,\" - \",item.notes]},idx))})]})]});}export default AgentLists;","map":{"version":3,"names":["React","useState","useEffect","axios","Header","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AgentLists","agents","setAgents","selected","setSelected","items","setItems","token","localStorage","getItem","get","headers","Authorization","concat","then","res","data","handleSelect","e","agentId","target","value","children","className","onChange","map","a","_id","name","item","idx","firstName","phone","notes"],"sources":["E:/mern/frontend/src/pages/AgentLists.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Header from '../components/Header';\r\n\r\nfunction AgentLists() {\r\n  const [agents, setAgents] = useState([]);\r\n  const [selected, setSelected] = useState('');\r\n  const [items, setItems] = useState([]);\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/api/agents', { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(res => setAgents(res.data));\r\n  }, [token]);\r\n\r\n  const handleSelect = async e => {\r\n    const agentId = e.target.value;\r\n    setSelected(agentId);\r\n    if (agentId) {\r\n      const res = await axios.get(`http://localhost:5000/api/lists/agent/${agentId}`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setItems(res.data);\r\n    } else {\r\n      setItems([]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className=\"app-container\">\r\n        <h3>Agent Lists</h3>\r\n        <select onChange={handleSelect} value={selected}>\r\n          <option value=\"\">Select Agent</option>\r\n          {agents.map(a => <option key={a._id} value={a._id}>{a.name}</option>)}\r\n        </select>\r\n        <ul>\r\n          {items.map((item, idx) => (\r\n            <li key={idx}>{item.firstName} - {item.phone} - {item.notes}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AgentLists;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1C,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAiB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3ClB,SAAS,CAAC,IAAM,CACdC,KAAK,CAACkB,GAAG,CAAC,kCAAkC,CAAE,CAAEC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYN,KAAK,CAAG,CAAE,CAAC,CAAC,CAC7FO,IAAI,CAACC,GAAG,EAAIb,SAAS,CAACa,GAAG,CAACC,IAAI,CAAC,CAAC,CACrC,CAAC,CAAE,CAACT,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAU,YAAY,CAAG,KAAM,CAAAC,CAAC,EAAI,CAC9B,KAAM,CAAAC,OAAO,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAC9BjB,WAAW,CAACe,OAAO,CAAC,CACpB,GAAIA,OAAO,CAAE,CACX,KAAM,CAAAJ,GAAG,CAAG,KAAM,CAAAvB,KAAK,CAACkB,GAAG,0CAAAG,MAAA,CAA0CM,OAAO,EAAI,CAAER,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYN,KAAK,CAAG,CAAE,CAAC,CAAC,CAClID,QAAQ,CAACS,GAAG,CAACC,IAAI,CAAC,CACpB,CAAC,IAAM,CACLV,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAAC,CAED,mBACET,KAAA,CAAAE,SAAA,EAAAuB,QAAA,eACE3B,IAAA,CAACF,MAAM,GAAE,CAAC,cACVI,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5B3B,IAAA,OAAA2B,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBzB,KAAA,WAAQ2B,QAAQ,CAAEP,YAAa,CAACI,KAAK,CAAElB,QAAS,CAAAmB,QAAA,eAC9C3B,IAAA,WAAQ0B,KAAK,CAAC,EAAE,CAAAC,QAAA,CAAC,cAAY,CAAQ,CAAC,CACrCrB,MAAM,CAACwB,GAAG,CAACC,CAAC,eAAI/B,IAAA,WAAoB0B,KAAK,CAAEK,CAAC,CAACC,GAAI,CAAAL,QAAA,CAAEI,CAAC,CAACE,IAAI,EAA5BF,CAAC,CAACC,GAAmC,CAAC,CAAC,EAC/D,CAAC,cACThC,IAAA,OAAA2B,QAAA,CACGjB,KAAK,CAACoB,GAAG,CAAC,CAACI,IAAI,CAAEC,GAAG,gBACnBjC,KAAA,OAAAyB,QAAA,EAAeO,IAAI,CAACE,SAAS,CAAC,KAAG,CAACF,IAAI,CAACG,KAAK,CAAC,KAAG,CAACH,IAAI,CAACI,KAAK,GAAlDH,GAAuD,CACjE,CAAC,CACA,CAAC,EACF,CAAC,EACN,CAAC,CAEP,CAEA,cAAe,CAAA9B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
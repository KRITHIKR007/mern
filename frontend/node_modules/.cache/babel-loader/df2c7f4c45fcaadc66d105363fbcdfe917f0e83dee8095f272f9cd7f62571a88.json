{"ast":null,"code":"import _objectSpread from\"E:/mern/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Agents(){const[agents,setAgents]=useState([]);const[form,setForm]=useState({name:'',email:'',mobile:'',password:''});const[error,setError]=useState('');const[success,setSuccess]=useState('');const token=localStorage.getItem('token');useEffect(()=>{axios.get('http://localhost:5000/api/agents',{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setAgents(res.data));},[success,token]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');try{await axios.post('http://localhost:5000/api/agents',form,{headers:{Authorization:\"Bearer \".concat(token)}});setSuccess('Agent added');setForm({name:'',email:'',mobile:'',password:''});}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Error adding agent');}};const deleteAgent=async id=>{await axios.delete(\"http://localhost:5000/api/agents/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});setSuccess('Agent deleted');};const downloadCSV=()=>{const csv=['Name,Email,Mobile',...agents.map(a=>\"\".concat(a.name,\",\").concat(a.email,\",\").concat(a.mobile))].join('\\n');const blob=new Blob([csv],{type:'text/csv'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='agents.csv';a.click();URL.revokeObjectURL(url);};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-actions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Agents\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"small\",onClick:downloadCSV,children:\"Download CSV\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",placeholder:\"Name\",value:form.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",placeholder:\"Email\",value:form.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"mobile\",placeholder:\"Mobile\",value:form.mobile,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Password\",value:form.password,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Agent\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:success}),/*#__PURE__*/_jsxs(\"table\",{className:\"agents-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mobile\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:agents.map(a=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:a.name}),/*#__PURE__*/_jsx(\"td\",{children:a.email}),/*#__PURE__*/_jsx(\"td\",{children:a.mobile}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"small\",onClick:()=>deleteAgent(a._id),children:\"Delete\"})})]},a._id))})]})]});}export default Agents;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Agents","agents","setAgents","form","setForm","name","email","mobile","password","error","setError","success","setSuccess","token","localStorage","getItem","get","headers","Authorization","concat","then","res","data","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","post","err","_err$response","_err$response$data","response","message","deleteAgent","id","delete","downloadCSV","csv","map","a","join","blob","Blob","type","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","className","children","onClick","onSubmit","placeholder","onChange","required","_id"],"sources":["E:/mern/frontend/src/pages/Agents.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Agents() {\r\n  const [agents, setAgents] = useState([]);\r\n  const [form, setForm] = useState({ name: '', email: '', mobile: '', password: '' });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/api/agents', { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(res => setAgents(res.data));\r\n  }, [success, token]);\r\n\r\n  const handleChange = e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setError(''); setSuccess('');\r\n    try {\r\n      await axios.post('http://localhost:5000/api/agents', form, { headers: { Authorization: `Bearer ${token}` } });\r\n      setSuccess('Agent added');\r\n      setForm({ name: '', email: '', mobile: '', password: '' });\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Error adding agent');\r\n    }\r\n  };\r\n\r\n  const deleteAgent = async id => {\r\n    await axios.delete(`http://localhost:5000/api/agents/${id}`, { headers: { Authorization: `Bearer ${token}` } });\r\n    setSuccess('Agent deleted');\r\n  };\r\n\r\n  const downloadCSV = () => {\r\n    const csv = ['Name,Email,Mobile', ...agents.map(a => `${a.name},${a.email},${a.mobile}`)].join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url; a.download = 'agents.csv'; a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <div className=\"top-actions\">\r\n        <h3>Agents</h3>\r\n        <div>\r\n          <button className=\"small\" onClick={downloadCSV}>Download CSV</button>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <input name=\"name\" placeholder=\"Name\" value={form.name} onChange={handleChange} required />\r\n        <input name=\"email\" placeholder=\"Email\" value={form.email} onChange={handleChange} required />\r\n        <input name=\"mobile\" placeholder=\"Mobile\" value={form.mobile} onChange={handleChange} required />\r\n        <input name=\"password\" type=\"password\" placeholder=\"Password\" value={form.password} onChange={handleChange} required />\r\n        <button type=\"submit\">Add Agent</button>\r\n      </form>\r\n      {error && <p className=\"error\">{error}</p>}\r\n      {success && <p className=\"success\">{success}</p>}\r\n\r\n      <table className=\"agents-table\">\r\n        <thead><tr><th>Name</th><th>Email</th><th>Mobile</th><th></th></tr></thead>\r\n        <tbody>\r\n          {agents.map(a => (\r\n            <tr key={a._id}>\r\n              <td>{a.name}</td>\r\n              <td>{a.email}</td>\r\n              <td>{a.mobile}</td>\r\n              <td><button className=\"small\" onClick={() => deleteAgent(a._id)}>Delete</button></td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Agents;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}